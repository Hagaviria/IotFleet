<div class="sensor-data-management">
  <p-toast></p-toast>

  <div class="flex justify-content-between align-items-center mb-4">
    <div class="flex gap-2">
      <p-button label="Crear Datos de Sensor" icon="pi pi-plus" (onClick)="showCreateSensorDataDialog()"
        [loading]="isLoading()">
      </p-button>
    </div>
  </div>

  @if (simulationStatus().isRunning) {
  <p-card class="mb-4">
    <div class="grid">
      <div class="col-12 md:col-8">
        <div class="flex align-items-center gap-3 mb-3">
          <i class="pi pi-spin pi-spinner text-blue-500"></i>
          <span class="text-blue-600 font-medium">SimulaciÃ³n Realista Activa</span>
          <p-tag value="ACTIVO" severity="success"></p-tag>
        </div>
        <div class="text-sm text-gray-600">
          <p><strong>ğŸ”„ Frecuencia:</strong> Actualizaciones cada 3 segundos</p>
          <p><strong>ğŸš— VehÃ­culos:</strong> {{ vehicles().length }} vehÃ­culos en movimiento</p>
          <p><strong>ğŸ“ Ãrea:</strong> BogotÃ¡ y alrededores (radio 2km)</p>
          <p><strong>ğŸ¯ Comportamiento:</strong> Movimiento realista con cambios de direcciÃ³n</p>
        </div>
      </div>
      <div class="col-12 md:col-4">
        <div class="text-center">
          <div class="text-2xl font-bold text-blue-600">{{ vehicles().length }}</div>
          <div class="text-sm text-gray-500">VehÃ­culos Activos</div>
        </div>
      </div>
    </div>
  </p-card>
  }

  <p-card class="mb-4">
    <div class="grid">
      <div class="col-12 md:col-6">
        <h4 class="font-medium text-gray-700 mb-2">Datos que se EnvÃ­an:</h4>
        <ul class="list-disc list-inside text-sm text-gray-600 space-y-1">
          <li><strong>ğŸ“ UbicaciÃ³n GPS:</strong> Latitud, Longitud, Altitud</li>
          <li><strong>â›½ Combustible:</strong> Nivel actual, Consumo</li>
          <li><strong>ğŸŒ¡ï¸ Temperatura:</strong> Motor y Ambiente</li>
          <li><strong>ğŸš— Velocidad:</strong> Velocidad actual</li>
        </ul>
      </div>
    </div>
  </p-card>

  <p-dialog header="Crear Datos de Sensor" [(visible)]="showCreateDialog" [modal]="true" [style]="{ width: '700px' }"
    [closable]="true" [draggable]="false" [resizable]="false">

    <app-generic-form [formFields]="sensorDataFields" [loading]="isLoading()"
      (formSubmit)="onCreateSensorDataSubmit($event)" (cancel)="cancelCreate()">
    </app-generic-form>
  </p-dialog>
</div>